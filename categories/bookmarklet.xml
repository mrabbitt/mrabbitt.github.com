<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>â‘ ne is 3 (bookmarklet)</title><link>http://oneis3.com/</link><description>One is 3</description><atom:link href="http://oneis3.com/categories/bookmarklet.xml" type="application/rss+xml" rel="self"></atom:link><lastBuildDate>Fri, 20 Sep 2013 22:29:43 GMT</lastBuildDate><generator>nikola</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Confluence numbered heading bookmarklet</title><link>http://oneis3.com//posts/confluence-numbered-heading-bookmarklet.html</link><description>&lt;p&gt;This bookmarklet adds hierarchical section numbers to the section headers on the current confluence page. Note that it does not permanently change the content of the page; it only transforms the displayed HTML until the page is re-loaded. One of these days I'll figure out how to get this to work as a &lt;a href="http://userscripts.org/"&gt;user script&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="javascript:%28function%28%29%2520%7Bfunction%2520addSectionNumber%2520%28elem%2C%2520sectionNumber%2C%2520parentSection%2C%2520level%29%2520%7Bvar%2520sectionNumberStr%2520%3D%2520%2527%2527%3Bvar%2520sectionSpan%3Bif%2520%28level%2520%3E%25201%29%2520%7BsectionNumberStr%2520%3D%2520parentSection%2520%2B%2520%2527.%2527%2520%2B%2520sectionNumber%3B%7D%2520else%2520if%2520%28level%2520%3E%25200%29%2520%7BsectionNumberStr%2520%3D%2520sectionNumber.toString%28%29%3B%7Dif%2520%28level%2520%3E%25200%2520%26%26%2520jQuery%28elem%29.find%28%2527.section-number%2527%29.length%2520%3D%3D%3D%25200%2520%29%2520%7BsectionSpan%2520%3D%2520jQuery%28%2527%3Cspan%2520class%3D%2522section-number%2522%3E%2527%29.text%28sectionNumberStr%2520%2B%2520%2527%2520%2527%29%3BjQuery%28elem%29.prepend%28sectionSpan%29%3B%7Dif%2520%28%2520level%2520%3D%3D%3D%25200%2520%29%2520%7BjQuery%28elem%29.find%28%2527h1%2527%29.each%28%2520function%28index%2C%2520element%29%2520%7BaddSectionNumber%28element%2C%2520%28index%2520%2B%25201%29%2C%2520sectionNumberStr%2C%2520%28level%2520%2B%25201%29%29%3B%7D%29%3B%7D%2520else%2520if%2520%28%2520level%2520%3C%25206%2520%29%2520%7BjQuery%28elem%29.nextUntil%28%2527h%2527%2520%2B%2520level%2C%2520%2527h%2527%2520%2B%2520level%2520%2B%2520%2527%2Ch%2527%2520%2B%2520%28level%2520%2B%25201%29%29.each%28%2520function%28index%2C%2520element%29%2520%7BaddSectionNumber%28element%2C%2520%28index%2520%2B%25201%29%2C%2520sectionNumberStr%2C%2520%28level%2520%2B%25201%29%29%3B%7D%29%3B%7Dreturn%3B%7DaddSectionNumber%28jQuery%28%2527%23main-content%2527%29.first%28%29%2C%25200%2C%2520%2527%2527%2C%25200%29%3B%7D%29%28%29%3B"&gt;Confluence numbered section header bookmarklet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Source:&lt;/p&gt;
&lt;p&gt;
&lt;/p&gt;&lt;div class="gist"&gt;
&lt;script src="https://gist.github.com/4582903.js"&gt;&lt;/script&gt;&lt;noscript&gt;
&lt;pre&gt;(function() {
    function addSectionNumber (elem, sectionNumber, parentSection, level) {
        var sectionNumberStr = '';
        var sectionSpan;

        if (level &amp;gt; 1) {
            sectionNumberStr = parentSection + '.' + sectionNumber;
        } else if (level &amp;gt; 0) {
            sectionNumberStr = sectionNumber.toString();
        }

        if (level &amp;gt; 0 &amp;amp;&amp;amp; jQuery(elem).find('.section-number').length === 0 ) {
            sectionSpan = jQuery('&amp;lt;span class="section-number"&amp;gt;').text(sectionNumberStr + ' ');
            jQuery(elem).prepend(sectionSpan);
        }

        if ( level === 0 ) {
            jQuery(elem).find('h1').each( function(index, element) {
                addSectionNumber(element, (index + 1), sectionNumberStr, (level + 1));
            });
        } else if ( level &amp;lt; 6 ) {
            jQuery(elem).nextUntil('h' + level, 'h' + level + ',h' + (level + 1)).each( function(index, element) {
                addSectionNumber(element, (index + 1), sectionNumberStr, (level + 1));
            });
        }

        return;
    }

    addSectionNumber(jQuery('#main-content').first(), 0, '', 0);
})();

&lt;/pre&gt;
&lt;/noscript&gt;
&lt;/div&gt;
</description><category>Confluence</category><category>bookmarklet</category><category>JavaScript</category><guid>http://oneis3.com//posts/confluence-numbered-heading-bookmarklet.html</guid><pubDate>Sun, 20 Jan 2013 19:42:27 GMT</pubDate></item></channel></rss>