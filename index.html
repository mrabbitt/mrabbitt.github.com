<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta charset="utf-8"><meta name="description" content="One is 3"><meta name="author" content="Michael Rabbitt"><title>①ne is 3</title><link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"><link href="assets/css/rst.css" rel="stylesheet" type="text/css"><link href="assets/css/code.css" rel="stylesheet" type="text/css"><link href="assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="assets/css/slides.css" rel="stylesheet" type="text/css"><link href="assets/css/theme.css" rel="stylesheet" type="text/css"><link href="assets/css/custom.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS (en)" href="rss.xml"></head><body id="oneis3">
<!-- Menubar -->
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href=".">
            ①ne is 3
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav"><li><a href="archive.html">Archives</a>
            </li><li><a href="categories/index.html">Tags</a>

                </li></ul><ul class="nav pull-right"></ul></div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
        <div class="postbox">
        <h1><a href="posts/python-markdown-extension-for-inline-gist.html">Python Markdown Extension for Inline Gist</a>
        <small>  
             Posted: <time class="published" datetime="2013-03-04T00:23:36">2013-03-04 00:23</time></small></h1>
        <hr><p>As discussed in <a href="https://groups.google.com/d/topic/nikola-discuss/ScaJGcTGBBY/discussion">this thread on the Nikola forum</a>, I'd wanted a way add a custom inline "gist" directive to Nikola which I could use in my markdown posts to include the full contents of the gist in a <code>&lt;noscript&gt;</code> tag.  This makes gist contents available in the site RSS feed and when viewing the site with Javascript disabled.  Here's a gist (of course) with the Python Markdown extension that makes this possible:</p>
<p>
</p><div class="gist">
<script src="https://gist.github.com/5080027.js"></script><noscript>
<pre># -*- coding: utf-8 -*-
#
# Copyright (c) 2013 Michael Rabbitt.
#
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the
# "Software"), to deal in the Software without restriction, including
# without limitation the rights to use, copy, modify, merge, publish,
# distribute, sublicense, and/or sell copies of the Software, and to
# permit persons to whom the Software is furnished to do so, subject to
# the following conditions:
#
# The above copyright notice and this permission notice shall be included
# in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
# TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
# SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
#
# Inspired by "[Python] reStructuredText GitHub Gist directive"
# (https://gist.github.com/brianhsu/1407759), public domain by Brian Hsu
'''
Extension to Python Markdown for Embedded Gists (gist.github.com)

Basic Example:

    &gt;&gt;&gt; import markdown
    &gt;&gt;&gt; text = """
    ... Text of the gist:
    ... [:gist: 4747847]
    ... """
    &gt;&gt;&gt; html = markdown.markdown(text, ['gist'])
    &gt;&gt;&gt; print html
    &lt;p&gt;Text of the gist:
    &lt;div class="gist"&gt;
    &lt;script src="https://gist.github.com/4747847.js"&gt;&lt;/script&gt;
    &lt;noscript&gt;
    &lt;pre&gt;import this&lt;/pre&gt;
    &lt;/noscript&gt;
    &lt;/div&gt;
    &lt;/p&gt;

Example with filename:

    &gt;&gt;&gt; import markdown
    &gt;&gt;&gt; text = """
    ... Text of the gist:
    ... [:gist: 4747847 zen.py]
    ... """
    &gt;&gt;&gt; html = markdown.markdown(text, ['gist'])
    &gt;&gt;&gt; print html
    &lt;p&gt;Text of the gist:
    &lt;div class="gist"&gt;
    &lt;script src="https://gist.github.com/4747847.js?file=zen.py"&gt;&lt;/script&gt;
    &lt;noscript&gt;
    &lt;pre&gt;import this&lt;/pre&gt;
    &lt;/noscript&gt;
    &lt;/div&gt;
    &lt;/p&gt;

Example using reStructuredText syntax:

    &gt;&gt;&gt; import markdown
    &gt;&gt;&gt; text = """
    ... Text of the gist:
    ... .. gist:: 4747847 zen.py
    ... """
    &gt;&gt;&gt; html = markdown.markdown(text, ['gist'])
    &gt;&gt;&gt; print html
    &lt;p&gt;Text of the gist:
    &lt;div class="gist"&gt;
    &lt;script src="https://gist.github.com/4747847.js?file=zen.py"&gt;&lt;/script&gt;
    &lt;noscript&gt;
    &lt;pre&gt;import this&lt;/pre&gt;
    &lt;/noscript&gt;
    &lt;/div&gt;
    &lt;/p&gt;
'''
from __future__ import unicode_literals
import warnings
from markdown.extensions import Extension
from markdown.inlinepatterns import Pattern
from markdown.util import AtomicString
from markdown.util import etree

try:
    import requests
except ImportError:
    requests = None  # NOQA

GIST_JS_URL = "https://gist.github.com/{0}.js"
GIST_FILE_JS_URL = "https://gist.github.com/{0}.js?file={1}"
GIST_RAW_URL = "https://raw.github.com/gist/{0}"
GIST_FILE_RAW_URL = "https://raw.github.com/gist/{0}/{1}"

GIST_MD_RE = r'\[:gist:\s*(?P&lt;gist_id&gt;\d+)(?:\s*(?P&lt;filename&gt;.+?))?\]'
GIST_RST_RE = r'(?m)^\.\.\s*gist::\s*(?P&lt;gist_id&gt;\d+)(?:\s*(?P&lt;filename&gt;.+))\s*$'


class GistPattern(Pattern):
    """ InlinePattern for footnote markers in a document's body text. """

    def __init__(self, pattern, configs):
        Pattern.__init__(self, pattern)

    def get_raw_gist_with_filename(self, gist_id, filename):
        url = GIST_FILE_RAW_URL.format(gist_id, filename)
        return requests.get(url).text

    def get_raw_gist(self, gist_id):
        url = GIST_RAW_URL.format(gist_id)
        return requests.get(url).text

    def handleMatch(self, m):
        gist_id = m.group('gist_id')
        gist_file = m.group('filename')

        gist_elem = etree.Element('div')
        gist_elem.set('class', 'gist')
        script_elem = etree.SubElement(gist_elem, 'script')

        if gist_file:
            script_elem.set('src', GIST_FILE_JS_URL.format(
                gist_id, gist_file))

        else:
            script_elem.set('src', GIST_JS_URL.format(
                gist_id))

        if requests:
            if gist_file:
                raw_gist = (self.get_raw_gist_with_filename(
                    gist_id, gist_file))
                script_elem.set('src', GIST_FILE_JS_URL.format(
                    gist_id, gist_file))

            else:
                raw_gist = (self.get_raw_gist(gist_id))
                script_elem.set('src', GIST_JS_URL.format(
                    gist_id))

            # Insert source as &lt;pre/&gt; within &lt;noscript&gt;
            noscript_elem = etree.SubElement(gist_elem, 'noscript')
            pre_elem = etree.SubElement(noscript_elem, 'pre')
            pre_elem.text = AtomicString(raw_gist)

        else:
            warnings.warn('"requests" package not installed.  '
                          'Please install to add inline gist source.')

        return gist_elem


class GistExtension(Extension):
    def __init__(self, configs={}):
        # set extension defaults
        self.config = {}

        # Override defaults with user settings
        for key, value in configs:
            self.setConfig(key, value)

    def extendMarkdown(self, md, md_globals):
        gist_md_pattern = GistPattern(GIST_MD_RE, self.getConfigs())
        gist_md_pattern.md = md
        md.inlinePatterns.add('gist', gist_md_pattern, "&lt;not_strong")

        gist_rst_pattern = GistPattern(GIST_RST_RE, self.getConfigs())
        gist_rst_pattern.md = md
        md.inlinePatterns.add('gist-rst', gist_rst_pattern, "&gt;gist")

        md.registerExtension(self)


def makeExtension(configs=None):
    return GistExtension(configs)

if __name__ == '__main__':
    import doctest
    doctest.testmod(optionflags=(doctest.NORMALIZE_WHITESPACE +
                                 doctest.REPORT_NDIFF))
</pre>
</noscript>
</div>

<p>I'll be sending a push request shortly to get this integrated into Nikola.  Thanks to Roberto Alsina for already <code>gist</code> support to reStructuredText posts in Nikola.</p>
            
    <p>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/confluence-numbered-heading-bookmarklet.html">Confluence numbered heading bookmarklet</a>
        <small>  
             Posted: <time class="published" datetime="2013-01-20T19:42:27">2013-01-20 19:42</time></small></h1>
        <hr><p>Unfortunately, the <a href="https://marketplace.atlassian.com/plugins/nl.avisi.confluence.plugins.numberedheadings">Numbered Heading Confluence plugin</a> isn't available for <a href="https://confluence.atlassian.com/display/AOD/Atlassian+OnDemand+Plugin+Policy#AtlassianOnDemandPluginPolicy-Confluence">Atlassian OnDemand</a>, and Atlassian doesn't seem to be in any hurry to implement <a href="https://jira.atlassian.com/browse/CONF-1732">CONF-1732</a>, so I put together this poor-man's hack:</p>
<p>This bookmarklet adds hierarchical section numbers to the section headers on the current confluence page. Note that it does not permanently change the content of the page; it only transforms the displayed HTML until the page is re-loaded. One of these days I'll figure out how to get this to work as a <a href="http://userscripts.org/">user script</a>.</p>
<p><a href="javascript:%28function%28%29%2520%7Bfunction%2520addSectionNumber%2520%28elem%2C%2520sectionNumber%2C%2520parentSection%2C%2520level%29%2520%7Bvar%2520sectionNumberStr%2520%3D%2520%2527%2527%3Bvar%2520sectionSpan%3Bif%2520%28level%2520%3E%25201%29%2520%7BsectionNumberStr%2520%3D%2520parentSection%2520%2B%2520%2527.%2527%2520%2B%2520sectionNumber%3B%7D%2520else%2520if%2520%28level%2520%3E%25200%29%2520%7BsectionNumberStr%2520%3D%2520sectionNumber.toString%28%29%3B%7Dif%2520%28level%2520%3E%25200%2520%26%26%2520jQuery%28elem%29.find%28%2527.section-number%2527%29.length%2520%3D%3D%3D%25200%2520%29%2520%7BsectionSpan%2520%3D%2520jQuery%28%2527%3Cspan%2520class%3D%2522section-number%2522%3E%2527%29.text%28sectionNumberStr%2520%2B%2520%2527%2520%2527%29%3BjQuery%28elem%29.prepend%28sectionSpan%29%3B%7Dif%2520%28%2520level%2520%3D%3D%3D%25200%2520%29%2520%7BjQuery%28elem%29.find%28%2527h1%2527%29.each%28%2520function%28index%2C%2520element%29%2520%7BaddSectionNumber%28element%2C%2520%28index%2520%2B%25201%29%2C%2520sectionNumberStr%2C%2520%28level%2520%2B%25201%29%29%3B%7D%29%3B%7D%2520else%2520if%2520%28%2520level%2520%3C%25206%2520%29%2520%7BjQuery%28elem%29.nextUntil%28%2527h%2527%2520%2B%2520level%2C%2520%2527h%2527%2520%2B%2520level%2520%2B%2520%2527%2Ch%2527%2520%2B%2520%28level%2520%2B%25201%29%29.each%28%2520function%28index%2C%2520element%29%2520%7BaddSectionNumber%28element%2C%2520%28index%2520%2B%25201%29%2C%2520sectionNumberStr%2C%2520%28level%2520%2B%25201%29%29%3B%7D%29%3B%7Dreturn%3B%7DaddSectionNumber%28jQuery%28%2527%23main-content%2527%29.first%28%29%2C%25200%2C%2520%2527%2527%2C%25200%29%3B%7D%29%28%29%3B">Confluence numbered section header bookmarklet</a></p>
<p>Source:</p>
<script src="https://gist.github.com/4582903.js"></script><p>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/oneis3com.html">oneis3.com</a>
        <small>  
             Posted: <time class="published" datetime="2013-01-12T23:26:58">2013-01-12 23:26</time></small></h1>
        <hr><p>Today I set up a new coding blog on <a href="http://www.oneis3.com">oneis3.com</a>.  I've tinkered in the past with Blogger and Tumblr, but this time I decided to go with a different solution which gives me more control of my content.  This site is generated using <a href="http://nikola.ralsina.com.ar">Nikola</a>, a static site generator implemented in Python.  Hosting is provided via <a href="http://pages.github.com">Github Pages</a> (see the <a href="https://github.com/mrabbitt/mrabbitt.github.com">mrabbitt.github.com repo</a>).</p>
<p>I've been writing lots of little Python scripts and JavaScript bookmarklets lately which I hope to share here.  Perhaps some <a href="http://grails.org">Grails</a>/<a href="http://groovy.codehaus.org">Groovy</a>/Java discoveries from my day job will also find there way here.</p>
            
    <p>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/python-script-to-download-splunk-documentation-pdfs.html">Python Script to download Splunk Documentation PDFs</a>
        <small>  
             Posted: <time class="published" datetime="2012-11-20T16:33:00">2012-11-20 16:33</time></small></h1>
        <hr><script src="https://gist.github.com/4121269.js"></script><p>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/open-in-sourcetree-from-intellij-idea.html">Open in SourceTree from IntelliJ IDEA</a>
        <small>  
             Posted: <time class="published" datetime="2012-07-05T12:11:00">2012-07-05 12:11</time></small></h1>
        <hr><p>I'm quite fond of <a href="http://www.sourcetreeapp.com/">SourceTree</a> for managing Git repositories (it does Mercurial as well).  SourceTree comes with an <code>stree</code> command to open repositories from the command line.  I wanted to set up an <a href="http://www.jetbrains.com/idea/webhelp/external-tools.html">external tool in IntelliJ IDEA</a> to the repo containing the current source file, <code>stree</code> only works if you call it without any arguments with a current working directory of the root level of a repo, or if you pass the path to the root level of a repo as an argument.  This is fine if you have only a single Git source root in your IntelliJ project:  You can just use call <code>stree</code> directly with the <code>$ProjectFileDir$</code> macro as a parameter.  But if you have multiple modules in your project with different Git source roots, it gets more difficult.  I tried using the <code>$ModuleFileDir$</code> macro, but this seems to the directory where the <code>.iml</code> file for the module is stored, which is not the source root of the module.</p>
<p>So, I ended up writing a small wrapper for <code>stree</code> which can take the path to any file or directory within a Git or Mercurial repo as an argument and invokes <code>stree</code> with the path to the root of the repo:</p>
<script src="https://gist.github.com/3051104.js"></script><p>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/diff-ing-zip-files-with-filemerge.html">Diff-ing .zip files with FileMerge</a>
        <small>  
             Posted: <time class="published" datetime="2010-12-13T10:36:00">2010-12-13 10:36</time></small></h1>
        <hr><p>This isn't particularly elegant, but you can use the FileMerge application that comes with Mac OS X developer tools to compare the contents of zip files using a custom filter.</p>
<p>Create a script <code>~/bin/zip_filemerge_filter.bash</code> with contents:</p>
<div class="code"><pre>##
#  List the size, CR-32 checksum, and file path of each file in a zip archive,
#  sorted in order by file path.
##
unzip -v -l "<span class="cp">${</span><span class="mi">1</span><span class="cp">}</span>" | cut -c 1-9,59-,49-57 | sort -k3
exit $?
Make the script executable (chmod +x ~/bin/zip_filemerge_filter.bash).
</pre></div>


<p>Open FileMerge, open the Preferences, and go to the "Filters" tab. Add an item to the list with:</p>
<ul><li>Extension: <code>zip</code> <em>(I've also added the filer for <code>.jar</code> and <code>.war</code> files.)</em></li>
<li>Filter: <code>~/bin/zip_filemerge_filter.bash $(FILE)</code></li>
<li>Display: <em>Filtered</em></li>
<li>Apply: <em>No</em></li>
</ul><p>Then use FileMerge (or the command line <code>opendiff</code> wrapper) to compare two .zip files.</p>
<p>This won't let you diff the contents of files within the zip archives, but will let you quickly see which files appear within one only archive and which files exist in both but have different content (i.e. different size and/or checksum).</p>
<p>(<em>Cross-posted on
<a href="http://stackoverflow.com/questions/587442/is-there-a-safe-way-to-run-a-diff-on-two-zip-compressed-files/4429169#4429169">StackOverflow</a> and <a href="http://michaelrabbitt.blogspot.com/2010/12/diff-ing-zip-files-with-filemerge.html">my old blogger blog</a>.</em>)</p>
            
    <p>

        </p></div>
    
<div>
<ul class="pager"></ul></div>

    

    


    </div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    Contents © 2013 Michael Rabbitt - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
</div>



<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37668928-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www')
            + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script><script src="assets/js/jquery-1.7.2.min.js" type="text/javascript"></script><script src="assets/js/bootstrap.min.js" type="text/javascript"></script><script src="assets/js/jquery.colorbox-min.js" type="text/javascript"></script><script src="assets/js/slides.min.jquery.js" type="text/javascript"></script><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"80%",maxHeight:"80%",scalePhotos:true});</script></body></html>